import{j as e,u as h}from"./index-DJqCrzXW.js";import{b as g,r as u}from"./router-BSEL9h4o.js";import"./supabase-BtyFyo3r.js";import"./vendor-RGnvvjkK.js";const c=({variant:s="primary",size:l="md",loading:r=!1,children:t,className:i="",disabled:a,...n})=>{const d="inline-flex items-center justify-center font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2",o={primary:"bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500 disabled:bg-blue-400",secondary:"bg-gray-600 hover:bg-gray-700 text-white focus:ring-gray-500 disabled:bg-gray-400",outline:"border border-gray-300 bg-white hover:bg-gray-50 text-gray-700 focus:ring-blue-500 disabled:bg-gray-100"},x={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"},m=`${d} ${o[s]} ${x[l]} ${r||a?"opacity-50 cursor-not-allowed":""} ${i}`;return e.jsxs("button",{className:m,disabled:a||r,...n,children:[r&&e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),t]})},p=()=>{const{user:s,loading:l,signOut:r}=h(),t=g();u.useEffect(()=>{window.scrollTo(0,0)},[]);const i=async()=>{await r(),t("/")};if(l)return e.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})});if(!s)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mx-auto bg-red-100 p-4 rounded-full w-16 h-16 flex items-center justify-center mb-4",children:e.jsxs("svg",{className:"icon-xl text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("circle",{cx:"12",cy:"12",r:"11"}),e.jsx("path",{d:"M15 9l-6 6m0-6l6 6"})]})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Необходимо войти в систему"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Для просмотра профиля требуется авторизация"}),e.jsx(c,{onClick:()=>t("/login"),className:"btn-primary",children:"Войти в систему"})]});const a=n=>{switch(n){case"Активно":return"text-green-700 bg-green-100";case"Истекает":return"text-yellow-700 bg-yellow-100";case"Приостановлено":return"text-red-700 bg-red-100";default:return"text-gray-700 bg-gray-100"}};return e.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"mx-auto bg-blue-100 p-4 rounded-full w-16 h-16 flex items-center justify-center mb-4",children:e.jsxs("svg",{className:"icon-xl text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("circle",{cx:"12",cy:"12",r:"11"}),e.jsx("circle",{cx:"12",cy:"9",r:"3"}),e.jsx("path",{d:"M5 20c0-3 3-5 7-5s7 2 7 5"})]})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Профиль члена СРО"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Информация о вашем членстве в СРО НОСО"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 border border-gray-200",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Информация об организации"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsxs("svg",{className:"icon-standard text-gray-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("rect",{width:"20",height:"15",x:"2",y:"3",rx:"2"}),e.jsx("path",{d:"M10 9l2 2 4-4"})]}),e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Статус членства"})]}),e.jsx("div",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${a(s.status)}`,children:s.status==="Найдена в реестре СРО"?"Член СРО":s.status==="Исключен"||s.status?.includes("Исключен")?"Исключен из СРО":s.status})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("svg",{className:"icon-standard text-gray-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Название организации"})]}),e.jsx("p",{className:"text-gray-900 font-medium",children:s.org_name==="Краткое наименование организации:"||s.org_name?.startsWith("Краткое наименование организации:")?"Информация временно недоступна (парсер сайта требует настройки)":s.org_name||"Информация временно недоступна"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsxs("svg",{className:"icon-standard text-gray-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{d:"M10 13a5 5 0 007 0"}),e.jsx("path",{d:"M20 13a9 9 0 10-14 0"})]}),e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"ИНН"})]}),e.jsx("p",{className:"text-gray-900 font-mono",children:s.inn})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsxs("svg",{className:"icon-standard text-gray-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("rect",{width:"18",height:"18",x:"3",y:"4",ry:"2",rx:"2"}),e.jsx("path",{d:"M16 2v4M8 2v4M3 10h18"}),e.jsx("path",{d:"M8 14h.01M12 14h.01M16 14h.01M8 18h.01M12 18h.01M16 18h.01"})]}),e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Дата регистрации"})]}),e.jsx("p",{className:"text-gray-900",children:s.registration_date?.startsWith("Исключен")?"Информация временно недоступна":s.registration_date?.includes("- ошибка")?s.registration_date.replace("- ошибка","").trim():s.registration_date||"Информация временно недоступна"})]})]}),e.jsxs("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("svg",{className:"icon-standard text-blue-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("label",{className:"text-sm font-medium text-blue-800",children:"Источник данных"})]}),e.jsxs("p",{className:"text-blue-900",children:["Вход выполнен по данным"," ",e.jsx("span",{className:"font-semibold",children:s.dataSource==="website"?"с официального сайта СРО НОСО":"локального реестра"})]})]})]}),s.status==="Приостановлено"&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Членство приостановлено"}),e.jsx("div",{className:"mt-2 text-sm text-red-700",children:e.jsx("p",{children:"Ваше членство в СРО временно приостановлено. Обратитесь в техническую поддержку СРО НОСО для восстановления доступа."})})]})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-4 border-t border-gray-200",children:[e.jsx(c,{onClick:()=>t("/documents"),className:"bg-gray-600 hover:bg-gray-700",children:"вернуться к документам"}),e.jsx(c,{onClick:i,style:{backgroundColor:"#dc2626",color:"white",padding:"0.5rem 1rem",borderRadius:"0.375rem",border:"none",fontWeight:"500"},className:"hover:bg-red-700 transition-colors",children:"Выйти из профиля"})]})]})]})};export{p as default};
